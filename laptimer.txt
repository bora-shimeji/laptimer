ジムカーナ用ラップタイマー(by tori1jp                  2020/06/04 rev1.0

概要
raspberrypi 3B及び光電センサを用いた、
ジムカーナ用ラップタイマに関する仕様を記す。

０、基本構成：
・raspberrypi 3Bモデル　×１
・光電センサ　×１～２
・動画保存用USBメモリ
・raspberrypi用カメラモジュール(V2)　×１
・I2S MEMSマイク　×１
・12V及び5V出力可能な電源
・三脚
・防水性のあるケース

以下任意
・操作用インタフェース
・プレビュー用TFT(HDMI接続できるもの

１、基本動作：
ウミガメGPや八の字GPといった
スタートとゴールが同一地点である競技において、
スタートライン兼ゴールラインに光電センサを設置して使用するものとする。
対象一人がスタートラインの光電センサに感知されてから、再度光電センサに感知されるまでの時間（①）を計測する。


２、録画機能：
①の時間の前後+5秒間をrapberrypiのカメラにて撮影する。
動画はH264形式で撮影し、raspberrypiに接続したUSBメモリのフォルダ：/mnt/usb1/vide/
に、
yyyy_mm_dd_hh_mm_ss.H264
のようなファイル名で保存する。
音声はI2Sで接続したマイクから取り込み、撮影と同時に録音を開始し、
録音終了時に動画と結合させる。


３、タイマー機能
①の時間を記録し、内部にcsv形式のファイルで保存する。
ファイル名は、
yyyy_mm_dd.csv
とし、USBメモリのフォルダ：/mnt/usb1/ に保存する。


４、タイム表示機能
①の時間を、ゴール地点の走者に通知する機能を持つ。
具体的には、①の時間が確定した場合、分：秒：ミリ秒のフォーマットで、
接続したTFTないし接続予定のセグメントLEDに表示する。
今後、合成音声で読み上げる機能を追加する。